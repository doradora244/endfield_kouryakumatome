# Arknights: Endfield 攻略育成ダメージ計算ツール 仕様書（MVP〜拡張）

## 1. 目的

Arknights: Endfield の攻略情報、最新情報、キャラ育成情報を一元管理できるWebツールを作成する。  
将来的にはダメージ計算ツール（理論値比較〜DPSシミュレーション）も実装し、編成・育成・攻略判断に使える実用ツールを目指す。

---

## 2. 開発方針

- 最初は **MVP（最小構成）** を優先して早く公開する
- 情報表示機能と計算機能を分離して設計する
- 将来のアップデート対応のため、データ構造に `version` / `source` / `confidence` を持たせる
- UIより先にデータ設計を固める

---

## 3. 想定ユーザー

- Endfieldの攻略情報を見たいプレイヤー
- キャラ育成の素材を確認したいプレイヤー
- 編成やダメージ比較をしたい中〜上級者
- 将来的には効率重視の周回・育成管理ユーザー

---

## 4. MVP（最初に作る機能）

### 4.1 キャラ一覧ページ

- キャラ一覧表示
- フィルタ機能（レア度 / 属性 / 役割 / 武器種）
- 検索機能（キャラ名）

### 4.2 キャラ詳細ページ

表示内容（MVP時点）

- 基本情報（名前、レア度、属性、役割、武器種）
- スキル情報（名称、簡易説明）
- 育成情報（必要素材、突破素材）
- 推奨ビルド欄（初期は手動テキストでも可）
- 最終更新日 / 情報ソース / 確度

### 4.3 素材一覧ページ

- 素材一覧
- 素材ごとの用途（どのキャラの育成に使うか）
- 逆引き検索（素材 -> 使用キャラ）

### 4.4 育成コスト計算（簡易）

- キャラ選択
- 現在レベル / 目標レベルを入力
- 現在素材（任意）を入力
- 必要素材総数 / 不足素材を表示

### 4.5 更新履歴ページ

- バージョンごとの追加・修正内容
- 更新日時
- 対応データ（キャラ追加、スキル修正、計算式更新など）

---

## 5. 将来拡張（優先順）

### 5.1 中期機能

- パーティビルダー（編成保存）
- 敵データベース
- バフ/デバフ一覧
- 簡易ダメージ計算ツール（理論ダメージ比較）

### 5.2 上級機能

- ローテーションDPS比較
- 時間軸シミュレーション
- バージョン差分表示（変更点比較）
- AIC/地域開発の攻略情報効率表
- ブループリント共有用ページ（共有コード管理）

---

## 6. ダメージ計算ツール仕様（段階実装）

### 6.1 段階1：簡易ダメージ比較

入力項目

- 攻撃側ステータス（ATK）
- スキル倍率
- 会心率 / 会心ダメージ（ある場合）
- 属性補正
- バフ（固定値 / %）
- 敵防御 / 敵耐性
- ヒット数

出力項目

- 1ヒットダメージ
- 総ダメージ
- 会心期待値
- 条件比較（バフ有無、装備差分）

### 6.2 段階2：実戦寄り計算

追加入力

- スキルCT / 消費リソース / 回転時間
- バフ持続時間
- パーティ支援効果
- 状態異常・元素反応補正（ゲーム仕様に応じて）

追加出力

- 想定DPS
- スキル回転込み総ダメージ
- ローテーション比較

### 6.3 段階3：上級シミュレーション

追加要素

- 時間軸シミュレーション
- 敵行動・耐性変化
- 乱数幅 / 分布表示
- 複数ローテーション比較

---

## 7. データ設計方針（重要）

### 7.1 表示用データと計算用データを分離

同じキャラでも、以下を分けて保持すること。

1. 表示情報
- 名前
- レア度
- 属性
- 役割
- 武器種
- 説明文
- 画像

2. 育成情報
- レベルごとの必要経験値
- 突破素材
- 強化素材
- 通貨コスト

3. 戦闘情報（計算用）
- 基礎ステータス
- 成長テーブル
- スキル倍率
- CT / コスト
- バフ/デバフ値
- ヒット構成

4. メタ情報
- version
- source（公式 / ゲーム内 / 検証）
- confidence（確定 / 暫定 / 検証中）
- updated_at

---

## 8. データモデル（最低限）

### 8.1 Character

- id
- name
- rarity
- element
- role
- weapon_type
- description
- icon_url
- version
- source
- confidence
- updated_at

### 8.2 CharacterStats

- character_id
- level
- hp
- atk
- def
- other_stats（必要に応じて）

### 8.3 CharacterSkill

- id
- character_id
- skill_name
- skill_type
- description
- multiplier_data（計算用）
- cooldown
- cost
- hit_count
- version
- updated_at

### 8.4 Material

- id
- name
- category
- icon_url
- source
- updated_at

### 8.5 CharacterUpgradeCost

- id
- character_id
- upgrade_type（level / breakthrough / skill）
- from_level
- to_level
- material_id
- amount
- credit_cost

### 8.6 Enemy（将来）

- id
- name
- level
- def
- resistances
- traits
- version

---

## 9. 技術スタック（推奨）

### フロントエンド

- Next.js (React)
- TypeScript
- Tailwind CSS
- UIコンポーネント（shadcn/ui など）

### バックエンド

- 初期は不要（静的JSONで運用）
- 将来は Next.js API Routes または Supabase

### データ保存

- MVP：JSON
- 拡張後：PostgreSQL（Supabase推奨）

### 計算エンジン

- TypeScriptで独立モジュール化
- UIコンポーネントから切り離して実装（例: `damageEngine.ts`）

---

## 10. ディレクトリ構成（例）

```text
src/
  app/
    characters/
    materials/
    calculator/
    updates/
  components/
    character/
    material/
    calculator/
    common/
  lib/
    data/
    calculation/
      damageEngine.ts
      growthCostEngine.ts
    utils/
data/
  characters.json
  character_stats.json
  character_skills.json
  materials.json
  upgrade_costs.json
  enemies.json   // 将来
```

---

## 11. UI/UX方針

### 11.1 キャラ詳細ページはタブ構成

1ページを縦長にしすぎず、以下タブで分ける

- 概要
- スキル
- 育成
- ビルド
- 計算（将来）

### 11.2 重要なUI要件

- フィルタが早い（属性・役割・武器種）
- 検索しやすい
- 更新情報が見える
- 情報ソースと確度が明示される

---

## 12. 更新運用ルール

- すべてのデータに `version` を付与
- すべてのデータに `source` を付与（公式 / ゲーム内 / コミュニティ検証）
- すべてのデータに `confidence` を付与（確定 / 暫定 / 検証中）
- 更新内容は `updates` に記録
- 計算式変更は必ず更新履歴に書く
- 可能ならGitHubでPRベース運用

---

## 13. 実装優先順位（推奨）

### Phase 1（MVP）

1. データ構造定義（Character / Material / UpgradeCost）
2. キャラ一覧
3. キャラ詳細
4. 素材一覧＋逆引き
5. 育成コスト計算（簡易）
6. 更新履歴ページ

### Phase 2

1. 敵データ
2. バフ/デバフデータ
3. 簡易ダメージ計算
4. パーティビルダー

### Phase 3

1. ローテーションDPS
2. シミュレーション
3. AIC/地域開発情報
4. 共有機能（ビルド/編成/ブループリント）

---

## 14. 実装時の注意点

- 最初から完璧なダメージ計算を作らない（段階実装）
- 計算ロジックをUIに埋め込まない
- 表示用と計算用のデータを混ぜない
- ゲームアップデートで仕様変更が入る前提で作る
- 「暫定値」「検証中」を表示できる設計にする

---

## 15. 初期ゴール（完成条件）

MVPの完成条件は以下を満たすこと

- キャラ情報を一覧・詳細で閲覧できる
- 育成素材を逆引きできる
- 育成コストの不足素材を計算できる
- 更新履歴が確認できる
- 後からダメージ計算機能を追加できるデータ構造になっている

---

## 16. 将来的な差別化ポイント

- ダメージ計算（理論値〜DPS）
- 編成比較
- AIC/地域開発の効率情報
- バージョン差分可視化
- 情報ソースと確度の明示（信頼性）
